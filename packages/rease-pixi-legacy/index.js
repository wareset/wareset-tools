/* eslint-disable */
const e=require("pixi.js-legacy");require("@pixi/graphics-extras-legacy"),require("@pixi/sound-legacy");const i=require("rease");function t(e){e.update();var i=e.findParent(r);e.PixiRenderer=i&&i.PixiRenderer}function n(e){e.update(),e.PixiRenderer=null}class r extends i.Rease{constructor(){super(),t(this),this.onMove(t),this.onDestroy(n)}update(){this.PixiRenderer&&this.PixiRenderer.update()}}function o(e,i){return e==e?e===i:i!=i}function s(e,i,t){for(var n in i)(r=i[n])&&(r=Object.getPrototypeOf(r))===Object.prototype||!r?s(e[n],i[n],t[n]||(t[n]={})):o(t[n],i[n])||o(e[n],t[n]=i[n])||(e[n]=i[n]);var r}function a(e){e&&(s(this.rease.pixi,e,this.cache),this.rease.update())}function p(e,i){i&&e.watch(i,a,{rease:e,cache:{}})}function x(e,i,t){i&&i(e),t&&e.on("render",t)}function l(e){e&&(e(this),this.update())}function c(e,i){i&&e.watch(i,l,e)}function h(e){var i=e.findParentOrNext($,$),t=i.parent,n=i.next,r=e.pixi,o=n&&n.pixi,s=o&&o.parent||t&&t.pixi;s?o?s.addChildAt(r,s.getChildIndex(o)):s.addChild(r):r.removeFromParent()}function d(e){h(e),e.pixi.destroy()}class $ extends r{constructor({onCreate:e,onRender:i,$onSignal$:t,children:n,$props$:r,pixi:o}){super(),this.pixi=o,p(this,r),h(this),this.onMove(h),x(this,e,i),this.insert(n),c(this,t),this.onDestroy(d)}}class PixiContainer extends ${constructor({onCreate:i,onRender:t,$onSignal$:n,children:r,$props$:o,pixi:s}){super({onCreate:i,onRender:t,$onSignal$:n,children:r,$props$:o,pixi:s||new e.Container})}}function u(e){var i,t=e.findParentOrNext($,PixiFilter),n=t.parent,r=t.next,o=e.pixi,s=r&&r.pixi,a=n&&n.pixi,p=e._pixiNextLast,x=e._pixiParentLast;if(x){var l=x.filters;l&&(i=l.indexOf(o))>-1&&(l.splice(i,1),x!==a&&(x.filters=l.slice()))}if(a){var c=a.filters;c=Array.isArray(c)?c.slice():c?[c]:[],p&&(i=c.indexOf(o))>-1?c.splice(i,0,o):c.push(o),a.filters=c}e._pixiNextLast=s,e._pixiParentLast=a}function P(e){u(e),e.pixi.destroy()}class PixiFilter extends r{constructor({onCreate:e,onRender:i,$onSignal$:t,children:n,$props$:r,pixi:o}){super(),this.pixi=o,p(this,r),u(this),this.onMove(u),x(this,e,i),this.insert(n),c(this,t),this.onDestroy(P)}}class PixiListen extends i.Rease{constructor({once:e,$event$:i,$handler$:t}){super(),this._once=e,this._move(),this.onMove(this._move,this),this.watchAll([i,t],this._watch,this),this.onDestroy(this._destroy,this)}_watch([e,i]){this._off(),this._eventsLast=Array.isArray(e)?e:[e],this._handlerLast=i,this._on()}_off(){var e=this._eventsLast,i=this._handlerLast,t=this._pixiParentLast;if(t&&e&&i)for(var n=e.length;n-- >0;)t.off(e[n],i,this)}_on(){var e=this._eventsLast,i=this._handlerLast,t=this._pixiParentLast;if(t&&e&&i)for(var n=e.length;n-- >0;)t[this._once?"once":"on"](e[n],i,this)}_move(){var e=this.findParent($),i=e&&e.pixi;i!==this._pixiParentLast&&(this._off(),this._pixiParentLast=i,this._on())}_destroy(){this._off()}}var m,S;S="function"==typeof requestAnimationFrame?requestAnimationFrame:"function"==typeof oRequestAnimationFrame?(oCancelAnimationFrame,oRequestAnimationFrame):"function"==typeof msRequestAnimationFrame?(msCancelAnimationFrame,msRequestAnimationFrame):"function"==typeof mozRequestAnimationFrame?(mozCancelAnimationFrame,mozRequestAnimationFrame):"function"==typeof webkitRequestAnimationFrame?(webkitCancelAnimationFrame,webkitRequestAnimationFrame):(m="object"==typeof performance?performance:Date,e=>setTimeout((()=>e(m.now())),16));var f={p:null,n:null};function R(){this.PixiRenderer=this}function g(e){e.pixi.destroy()}f.p=f.n=f;exports.PixiAnimatedSprite=class PixiAnimatedSprite extends ${constructor({onCreate:i,onRender:t,$onSignal$:n,children:r,options:o,$props$:s,pixi:a}){super({onCreate:i,onRender:t,$onSignal$:n,children:r,$props$:s,pixi:a||new e.AnimatedSprite(o.textures,o.autoUpdate)})}},exports.PixiBitmapText=class PixiBitmapText extends ${constructor({onCreate:i,onRender:t,$onSignal$:n,children:r,options:o,$props$:s,pixi:a}){super({onCreate:i,onRender:t,$onSignal$:n,children:r,$props$:s,pixi:a||new e.BitmapText(o.text,o.style)})}},exports.PixiContainer=PixiContainer,exports.PixiFilter=PixiFilter,exports.PixiGraphics=class PixiGraphics extends ${constructor({onCreate:i,onRender:t,$onSignal$:n,children:r,options:o,$props$:s,pixi:a}){o||(o={}),super({onCreate:i,onRender:t,$onSignal$:n,children:r,$props$:s,pixi:a||new e.Graphics(o.geometry)})}},exports.PixiHTMLText=class PixiHTMLText extends ${constructor({onCreate:i,onRender:t,$onSignal$:n,children:r,options:o,$props$:s,pixi:a}){o||(o={}),super({onCreate:i,onRender:t,$onSignal$:n,children:r,$props$:s,pixi:a||new e.HTMLText(o.text,o.style)})}},exports.PixiListen=PixiListen,exports.PixiMesh=class PixiMesh extends ${constructor({onCreate:i,onRender:t,$onSignal$:n,children:r,options:o,$props$:s,pixi:a}){super({onCreate:i,onRender:t,$onSignal$:n,children:r,$props$:s,pixi:a||new e.Mesh(o.geometry,o.shader,o.state,o.drawMode)})}},exports.PixiNineSlicePlane=class PixiNineSlicePlane extends ${constructor({onCreate:i,onRender:t,$onSignal$:n,children:r,options:o,$props$:s,pixi:a}){super({onCreate:i,onRender:t,$onSignal$:n,children:r,$props$:s,pixi:a||new e.NineSlicePlane(o.texture,o.leftWidth,o.topHeight,o.rightWidth,o.bottomHeight)})}},exports.PixiParticleContainer=class PixiParticleContainer extends ${constructor({onCreate:i,onRender:t,$onSignal$:n,children:r,options:o,$props$:s,pixi:a}){o||(o={}),super({onCreate:i,onRender:t,$onSignal$:n,children:r,$props$:s,pixi:a||new e.ParticleContainer(o.maxSize,o.properties,o.batchSize,o.autoResize)})}},exports.PixiRenderer=class PixiRenderer extends r{constructor({onCreate:t,onRender:n,$onSignal$:r,children:o,options:s,$props$:a,pixi:l}){super(),this.pixi=l||(l=e.autoDetectRenderer(s)),this._render=e=>{this._allowUpdate=!0,this.emitDeep("render",e),this.pixi.render(this.PixiStage.pixi)},this._allowUpdate=!0,p(this,a),R.call(this),this.onMove(R,this);var h=l.view.style;h.width=h.height="100%",this.insert(i.h(i.RElement,{is:l.view},i.h(PixiContainer,null))),this.PixiStage=this.children[0].children[0],this.onDestroy(i.listen(l.view,"resize",(()=>{l.resize(l.view.clientWidth,l.view.clientHeight),this.update()}))),x(this,t,n),this.PixiStage.insert(o),c(this,r),this.onDestroy(g),this.update()}update(){this._allowUpdate&&(this._allowUpdate=!1,S(this._render))}},exports.PixiSimpleMesh=class PixiSimpleMesh extends ${constructor({onCreate:i,onRender:t,$onSignal$:n,children:r,options:o,$props$:s,pixi:a}){o||(o={}),super({onCreate:i,onRender:t,$onSignal$:n,children:r,$props$:s,pixi:a||new e.SimpleMesh(o.texture,o.vertices,o.uvs,o.indices,o.drawMode)})}},exports.PixiSimplePlane=class PixiSimplePlane extends ${constructor({onCreate:i,onRender:t,$onSignal$:n,children:r,options:o,$props$:s,pixi:a}){super({onCreate:i,onRender:t,$onSignal$:n,children:r,$props$:s,pixi:a||new e.SimplePlane(o.texture,o.verticesX,o.verticesY)})}},exports.PixiSimpleRope=class PixiSimpleRope extends ${constructor({onCreate:i,onRender:t,$onSignal$:n,children:r,options:o,$props$:s,pixi:a}){super({onCreate:i,onRender:t,$onSignal$:n,children:r,$props$:s,pixi:a||new e.SimpleRope(o.texture,o.points,o.textureScale)})}},exports.PixiSprite=class PixiSprite extends ${constructor({onCreate:i,onRender:t,$onSignal$:n,children:r,options:o,$props$:s,pixi:a}){o||(o={}),super({onCreate:i,onRender:t,$onSignal$:n,children:r,$props$:s,pixi:a||new e.Sprite(o.texture)})}},exports.PixiText=class PixiText extends ${constructor({onCreate:i,onRender:t,$onSignal$:n,children:r,options:o,$props$:s,pixi:a}){o||(o={}),super({onCreate:i,onRender:t,$onSignal$:n,children:r,$props$:s,pixi:a||new e.Text(o.text,o.style,o.canvas)})}},exports.PixiTilingSprite=class PixiTilingSprite extends ${constructor({onCreate:i,onRender:t,$onSignal$:n,children:r,options:o,$props$:s,pixi:a}){super({onCreate:i,onRender:t,$onSignal$:n,children:r,$props$:s,pixi:a||new e.TilingSprite(o.texture,o.width,o.height)})}},exports._PixiDisplayObject_=$;
