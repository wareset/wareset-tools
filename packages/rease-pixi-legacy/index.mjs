/* eslint-disable */
import{Container as e,ParticleContainer as i,Sprite as n,TilingSprite as t,Text as r,AnimatedSprite as o,HTMLText as s,Graphics as a,Mesh as p,SimplePlane as c,NineSlicePlane as l,SimpleMesh as h,SimpleRope as x,BitmapText as d,autoDetectRenderer as $}from"pixi.js-legacy";import"@pixi/graphics-extras-legacy";import"@pixi/sound-legacy";import{Rease as u,h as m,RElement as P,listen as f}from"rease";function g(e){e.update();var i=e.findParent(R);e.PixiRenderer=i&&i.PixiRenderer}function S(e){e.update(),e.PixiRenderer=null}class R extends u{constructor(){super(),g(this),this.onMove(g),this.onDestroy(S)}update(){this.PixiRenderer&&this.PixiRenderer.update()}}function C(e,i){return e==e?e===i:i!=i}function v(e,i,n){for(var t in i)(r=i[t])&&(r=Object.getPrototypeOf(r))===Object.prototype||!r?v(e[t],i[t],n[t]||(n[t]={})):C(n[t],i[t])||C(e[t],n[t]=i[t])||(e[t]=i[t]);var r}function w(e){e&&(v(this.rease.pixi,e,this.cache),this.rease.update())}function _(e,i){i&&e.watch(i,w,{rease:e,cache:{}})}function y(e,i,n){i&&i(e),n&&e.on("render",n)}function A(e){e&&(e(this),this.update())}function F(e,i){i&&e.watch(i,A,e)}function L(e){var i=e.findParentOrNext(T,T),n=i.parent,t=i.next,r=e.pixi,o=t&&t.pixi,s=o&&o.parent||n&&n.pixi;s?o?s.addChildAt(r,s.getChildIndex(o)):s.addChild(r):r.removeFromParent()}function M(e){L(e),e.pixi.destroy()}class T extends R{constructor({onCreate:e,onRender:i,$onSignal$:n,children:t,$props$:r,pixi:o}){super(),this.pixi=o,_(this,r),L(this),this.onMove(L),y(this,e,i),this.insert(t),F(this,n),this.onDestroy(M)}}class PixiContainer extends T{constructor({onCreate:i,onRender:n,$onSignal$:t,children:r,$props$:o,pixi:s}){super({onCreate:i,onRender:n,$onSignal$:t,children:r,$props$:o,pixi:s||new e})}}class PixiParticleContainer extends T{constructor({onCreate:e,onRender:n,$onSignal$:t,children:r,options:o,$props$:s,pixi:a}){o||(o={}),super({onCreate:e,onRender:n,$onSignal$:t,children:r,$props$:s,pixi:a||new i(o.maxSize,o.properties,o.batchSize,o.autoResize)})}}class PixiSprite extends T{constructor({onCreate:e,onRender:i,$onSignal$:t,children:r,options:o,$props$:s,pixi:a}){o||(o={}),super({onCreate:e,onRender:i,$onSignal$:t,children:r,$props$:s,pixi:a||new n(o.texture)})}}class PixiTilingSprite extends T{constructor({onCreate:e,onRender:i,$onSignal$:n,children:r,options:o,$props$:s,pixi:a}){super({onCreate:e,onRender:i,$onSignal$:n,children:r,$props$:s,pixi:a||new t(o.texture,o.width,o.height)})}}class PixiText extends T{constructor({onCreate:e,onRender:i,$onSignal$:n,children:t,options:o,$props$:s,pixi:a}){o||(o={}),super({onCreate:e,onRender:i,$onSignal$:n,children:t,$props$:s,pixi:a||new r(o.text,o.style,o.canvas)})}}class PixiAnimatedSprite extends T{constructor({onCreate:e,onRender:i,$onSignal$:n,children:t,options:r,$props$:s,pixi:a}){super({onCreate:e,onRender:i,$onSignal$:n,children:t,$props$:s,pixi:a||new o(r.textures,r.autoUpdate)})}}class PixiHTMLText extends T{constructor({onCreate:e,onRender:i,$onSignal$:n,children:t,options:r,$props$:o,pixi:a}){r||(r={}),super({onCreate:e,onRender:i,$onSignal$:n,children:t,$props$:o,pixi:a||new s(r.text,r.style)})}}class PixiGraphics extends T{constructor({onCreate:e,onRender:i,$onSignal$:n,children:t,options:r,$props$:o,pixi:s}){r||(r={}),super({onCreate:e,onRender:i,$onSignal$:n,children:t,$props$:o,pixi:s||new a(r.geometry)})}}class PixiMesh extends T{constructor({onCreate:e,onRender:i,$onSignal$:n,children:t,options:r,$props$:o,pixi:s}){super({onCreate:e,onRender:i,$onSignal$:n,children:t,$props$:o,pixi:s||new p(r.geometry,r.shader,r.state,r.drawMode)})}}class PixiSimplePlane extends T{constructor({onCreate:e,onRender:i,$onSignal$:n,children:t,options:r,$props$:o,pixi:s}){super({onCreate:e,onRender:i,$onSignal$:n,children:t,$props$:o,pixi:s||new c(r.texture,r.verticesX,r.verticesY)})}}class PixiNineSlicePlane extends T{constructor({onCreate:e,onRender:i,$onSignal$:n,children:t,options:r,$props$:o,pixi:s}){super({onCreate:e,onRender:i,$onSignal$:n,children:t,$props$:o,pixi:s||new l(r.texture,r.leftWidth,r.topHeight,r.rightWidth,r.bottomHeight)})}}class PixiSimpleMesh extends T{constructor({onCreate:e,onRender:i,$onSignal$:n,children:t,options:r,$props$:o,pixi:s}){r||(r={}),super({onCreate:e,onRender:i,$onSignal$:n,children:t,$props$:o,pixi:s||new h(r.texture,r.vertices,r.uvs,r.indices,r.drawMode)})}}class PixiSimpleRope extends T{constructor({onCreate:e,onRender:i,$onSignal$:n,children:t,options:r,$props$:o,pixi:s}){super({onCreate:e,onRender:i,$onSignal$:n,children:t,$props$:o,pixi:s||new x(r.texture,r.points,r.textureScale)})}}class PixiBitmapText extends T{constructor({onCreate:e,onRender:i,$onSignal$:n,children:t,options:r,$props$:o,pixi:s}){super({onCreate:e,onRender:i,$onSignal$:n,children:t,$props$:o,pixi:s||new d(r.text,r.style)})}}function q(e){var i,n=e.findParentOrNext(T,PixiFilter),t=n.parent,r=n.next,o=e.pixi,s=r&&r.pixi,a=t&&t.pixi,p=e._pixiNextLast,c=e._pixiParentLast;if(c){var l=c.filters;l&&(i=l.indexOf(o))>-1&&(l.splice(i,1),c!==a&&(c.filters=l.slice()))}if(a){var h=a.filters;h=Array.isArray(h)?h.slice():h?[h]:[],p&&(i=h.indexOf(o))>-1?h.splice(i,0,o):h.push(o),a.filters=h}e._pixiNextLast=s,e._pixiParentLast=a}function b(e){q(e),e.pixi.destroy()}class PixiFilter extends R{constructor({onCreate:e,onRender:i,$onSignal$:n,children:t,$props$:r,pixi:o}){super(),this.pixi=o,_(this,r),q(this),this.onMove(q),y(this,e,i),this.insert(t),F(this,n),this.onDestroy(b)}}class PixiListen extends u{constructor({once:e,$event$:i,$handler$:n}){super(),this._once=e,this._move(),this.onMove(this._move,this),this.watchAll([i,n],this._watch,this),this.onDestroy(this._destroy,this)}_watch([e,i]){this._off(),this._eventsLast=Array.isArray(e)?e:[e],this._handlerLast=i,this._on()}_off(){var e=this._eventsLast,i=this._handlerLast,n=this._pixiParentLast;if(n&&e&&i)for(var t=e.length;t-- >0;)n.off(e[t],i,this)}_on(){var e=this._eventsLast,i=this._handlerLast,n=this._pixiParentLast;if(n&&e&&i)for(var t=e.length;t-- >0;)n[this._once?"once":"on"](e[t],i,this)}_move(){var e=this.findParent(T),i=e&&e.pixi;i!==this._pixiParentLast&&(this._off(),this._pixiParentLast=i,this._on())}_destroy(){this._off()}}var z,D;D="function"==typeof requestAnimationFrame?requestAnimationFrame:"function"==typeof oRequestAnimationFrame?(oCancelAnimationFrame,oRequestAnimationFrame):"function"==typeof msRequestAnimationFrame?(msCancelAnimationFrame,msRequestAnimationFrame):"function"==typeof mozRequestAnimationFrame?(mozCancelAnimationFrame,mozRequestAnimationFrame):"function"==typeof webkitRequestAnimationFrame?(webkitCancelAnimationFrame,webkitRequestAnimationFrame):(z="object"==typeof performance?performance:Date,e=>setTimeout((()=>e(z.now())),16));var O={p:null,n:null};function N(e){e.PixiRenderer=e}function H(e){e.pixi.destroy()}O.p=O.n=O;class PixiRenderer extends R{constructor({onCreate:e,onRender:i,$onSignal$:n,children:t,options:r,$props$:o,pixi:s}){super(),this.pixi=s||(s=$(r)),this._render=e=>{this._allowUpdate=!0,this.emitDeep("render",e),this.pixi.render(this.PixiStage.pixi)},this._allowUpdate=!0,_(this,o),N(this),this.onMove(N);var a=s.view.style;a.width=a.height="100%",this.insert(m(P,{node:s.view},m(PixiContainer,null))),this.PixiStage=this.children[0].children[0],this.onDestroy(f(s.view,"resize",(()=>{s.resize(s.view.clientWidth,s.view.clientHeight),this.update()}))),y(this,e,i),this.PixiStage.insert(t),F(this,n),this.onDestroy(H),this.update()}update(){this._allowUpdate&&(this._allowUpdate=!1,D(this._render))}}export{PixiAnimatedSprite,PixiBitmapText,PixiContainer,PixiFilter,PixiGraphics,PixiHTMLText,PixiListen,PixiMesh,PixiNineSlicePlane,PixiParticleContainer,PixiRenderer,PixiSimpleMesh,PixiSimplePlane,PixiSimpleRope,PixiSprite,PixiText,PixiTilingSprite,T as _PixiDisplayObject_};
