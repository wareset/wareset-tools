/* eslint-disable */
import*as e from"fs";import*as t from"os";import*as r from"path";import o from"puppeteer";var s={en:"английский",ar:"арабский",bg:"болгарский",hu:"венгерский",el:"греческий",da:"датский",id:"индонезийский",es:"испанский",it:"итальянский",zh:"китайский",ko:"корейский",lv:"латышский",lt:"литовский",de:"немецкий",nl:"нидерландский",nb:"норвежский",pl:"польский",pt:"португальский",ro:"румынский",ru:"русский",sk:"словацкий",sl:"словенский",tr:"турецкий",uk:"украинский",fi:"финский",fr:"французский",cs:"чешский",sv:"шведский",et:"эстонский",ja:"японский"},a=(()=>{var a,n,l,i,m=r.join(t.homedir(),".wareset_tools_deepl.cache.json"),u=[];console.log("DT cache: "+(m||"DISABLED"));var c,f=async t=>{if(l&&l.res)try{var r=JSON.parse((await t.buffer()).toString()).result;if(!r)return;var o=r.source_lang,s=r.target_lang,a=r.translations;if(!o||!s||!a)return;if(o=o.toLowerCase(),s=s.toLowerCase(),l.from!==o||l.to!==s)return;console.log("DT: "+l.text),console.log(...a.map((e=>e.beams.map((e=>e.sentences[0].text)))));var n=a.map((e=>e.beams[0].sentences[0].text.replace(/^<P>/,"").replace(/<\/P>$/,"").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'"))).join("\n");i&&(i[l.from]||(i[l.from]={}),i[l.from][l.to]||(i[l.from][l.to]={}),i[l.from][l.to][l.text]=n,m&&e.writeFileSync(m,JSON.stringify(i,null,2))),l.res(n),l.res=null,await((e=100)=>new Promise((t=>setTimeout(t,e))))(l.timeout),l=null,p()}catch(u){}},g=()=>n&&(n.close(),n=a=null),p=async()=>{if(clearTimeout(c),!l)if(l=u.shift()){var t=l,r=t.from,s=t.to,h=t.text;if(!i&&(i={},m&&e.existsSync(m)))try{i=JSON.parse(e.readFileSync(m,"utf8"))||{}}catch(w){}i[r]&&i[r][s]&&i[r][s][h]?(l.res(i[r][s][h]),l.res=null,l=null,p()):(a||(a=await(n=await o.launch({headless:!1})).newPage()).on("response",f),a.goto(`https://www.deepl.com/ru/translator#${r}/${s}/${encodeURI(h)}`))}else c=setTimeout(g,5e3)};return(e="",t="en",r="ru",o=999)=>{if(t===r)return Promise.resolve(e);if(!(t in s)||!(r in s))throw new Error(`wareset_tools_deepl: ${t} -> ${r}: - incorrect lang`);return new Promise((s=>{u.push({res:s,text:e,from:t,to:r,timeout:o}),p()}))}})(),n={ru:"русский",en:"английский",az:"азербайджанский",ay:"аймара",sq:"албанский",am:"амхарский",ar:"арабский",hy:"армянский",as:"ассамский",af:"африкаанс",bm:"бамбара",eu:"баскский",be:"белорусский",bn:"бенгальский",my:"бирманский",bg:"болгарский",bs:"боснийский",cy:"валлийский",hu:"венгерский",vi:"вьетнамский",gl:"галисийский",el:"греческий",ka:"грузинский",gn:"гуарани",gu:"гуджарати",da:"датский",zu:"зулу",iw:"иврит",ig:"игбо",yi:"идиш",id:"индонезийский",ga:"ирландский",is:"исландский",es:"испанский",it:"итальянский",yo:"йоруба",kk:"казахский",kn:"каннада",ca:"каталанский",qu:"кечуа",ky:"киргизский","zh-CN":"китайский",ko:"корейский",co:"корсиканский",xh:"коса",ht:"креольский",ku:"курдский",km:"кхмерский",lo:"лаосский",la:"латинский",lv:"латышский",ln:"лингала",lt:"литовский",lg:"луганда",lb:"люксембургский",mk:"македонский",mg:"малагасийский",ms:"малайский",ml:"малаялам",dv:"мальдивский",mt:"мальтийский",mi:"маори",mr:"маратхи",mn:"монгольский",de:"немецкий",ne:"непальский",nl:"нидерландский",no:"норвежский",or:"ория",om:"оромо",pa:"панджаби",fa:"персидский",pl:"польский",pt:"португальский",ps:"пушту",rw:"руанда",ro:"румынский",sm:"самоанский",sa:"санскрит",sr:"сербский",st:"сесото",si:"сингальский",sd:"синдхи",sk:"словацкий",sl:"словенский",so:"сомалийский",sw:"суахили",su:"сунданский",tg:"таджикский",th:"тайский",ta:"тамильский",tt:"татарский",te:"телугу",ti:"тигринья",ts:"тсонга",tr:"турецкий",tk:"туркменский",uz:"узбекский",ug:"уйгурский",uk:"украинский",ur:"урду",tl:"филиппинский",fi:"финский",fr:"французский",fy:"фризский",ha:"хауса",hi:"хинди",hr:"хорватский",ak:"чви",ny:"чева",cs:"чешский",sv:"шведский",sn:"шона",gd:"шотландский",ee:"эве",eo:"эсперанто",et:"эстонский",jw:"яванский",ja:"японский"},l=(()=>{var s,a,l,i,m=r.join(t.homedir(),".wareset_tools_google.cache.json"),u=[];console.log("GT cache: "+(m||"DISABLED"));var c,f=async t=>{if(l&&l.res)try{var r=(await t.buffer()).toString().split("\n")[3],o=JSON.parse(JSON.parse(r)[0][2])[1],s=o[0][0],a=s[0],n=s[5],u=o[4],c=u[0],f=u[1],g=u[2];if(l.text!==c||l.from!==f||l.to!==g)return;if(!n){if("string"!=typeof a)return;console.log(`GT warning: ${f} -> ${g}. ${c} -> ${a}`),n=[[a]]}var h=n.map((e=>e[0])).join("");console.log("GT:",f+" -> "+g,h),i&&(i[l.from]||(i[l.from]={}),i[l.from][l.to]||(i[l.from][l.to]={}),i[l.from][l.to][l.text]=h,m&&e.writeFileSync(m,JSON.stringify(i,null,2))),l.res(h),l.res=null,await((e=100)=>new Promise((t=>setTimeout(t,e))))(l.timeout),l=null,p()}catch(w){}},g=()=>a&&(a.close(),a=s=null),p=async()=>{if(clearTimeout(c),!l)if(l=u.shift()){var t=l,r=t.from,n=t.to,h=t.text;if(!i&&(i={},m&&e.existsSync(m)))try{i=JSON.parse(e.readFileSync(m,"utf8"))||{}}catch(w){}i[r]&&i[r][n]&&i[r][n][h]?(l.res(i[r][n][h]),l.res=null,l=null,p()):(s||(s=await(a=await o.launch({headless:!1})).newPage()).on("response",f),s.goto(`https://translate.google.com/?sl=${r}&tl=${n}&text=${encodeURI(h)}&op=translate`))}else c=setTimeout(g,5e3)};return(e="",t="en",r="ru",o=2222)=>{if("zh"===t&&(t="zh-CN"),"zh"===r&&(r="zh-CN"),t===r)return Promise.resolve(e);if(!(t in n)||!(r in n))throw new Error(`wareset_tools_google: ${t} -> ${r}: - incorrect lang`);return new Promise((s=>{u.push({res:s,text:e,from:t,to:r,timeout:o}),p()}))}})();export{s as DEEPL_LANGS,n as GOOGLE_LANGS,a as deepl,l as google};
