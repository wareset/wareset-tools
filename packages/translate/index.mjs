/* eslint-disable */
import*as e from"fs";import*as t from"os";import*as r from"path";import o from"puppeteer";var s,a,n,i,l,m,u,f,c,p,w={en:"английский",ar:"арабский",bg:"болгарский",hu:"венгерский",el:"греческий",da:"датский",id:"индонезийский",es:"испанский",it:"итальянский",zh:"китайский",ko:"корейский",lv:"латышский",lt:"литовский",de:"немецкий",nl:"нидерландский",nb:"норвежский",pl:"польский",pt:"португальский",ro:"румынский",ru:"русский",sk:"словацкий",sl:"словенский",tr:"турецкий",uk:"украинский",fi:"финский",fr:"французский",cs:"чешский",sv:"шведский",et:"эстонский",ja:"японский"},g=(m=r.join(t.tmpdir(),"wareset_tools_deepl.json"),u=[],f=async t=>{if(n)try{var r=JSON.parse((await t.buffer()).toString()).result;if(!r)return;var o=r.source_lang,s=r.target_lang,a=r.translations;if(!o||!s||!a)return;if(o=o.toLowerCase(),s=s.toLowerCase(),n.from!==o||n.to!==s)return;var l=a.map((e=>e.beams[0].sentences[0].text)).join("\n");i&&(i[n.from]||(i[n.from]={}),i[n.from][n.to]||(i[n.from][n.to]={}),i[n.from][n.to][n.text]=l,e.writeFileSync(m,JSON.stringify(i,null,2))),n.res(l),await((e=100)=>new Promise((t=>setTimeout(t,e))))(333),n=null,p()}catch(u){}},c=()=>a&&(a.close(),a=s=null),p=async()=>{if(clearTimeout(l),!n)if(n=u.shift()){var t=n,r=t.from,w=t.to,g=t.text;i||(i=e.existsSync(m)?JSON.parse(e.readFileSync(m,"utf8")):{}),i[r]&&i[r][w]&&i[r][w][g]?(n.res(i[r][w][g]),n=null,p()):(s||(s=await(a=await o.launch({headless:!1})).newPage()).on("response",f),s.goto(`https://www.deepl.com/ru/translator#${r}/${w}/${encodeURI(g)}`))}else l=setTimeout(c,5e3)},(e="",t="en",r="ru")=>{if(t===r||!(t in w)||!(r in w))throw new Error(`wareset_tools_deepl: ${t} -> ${r}: - incorrect lang`);return new Promise((o=>{u.push({res:o,text:e,from:t,to:r}),p()}))}),h={ru:"русский",en:"английский",az:"азербайджанский",ay:"аймара",sq:"албанский",am:"амхарский",ar:"арабский",hy:"армянский",as:"ассамский",af:"африкаанс",bm:"бамбара",eu:"баскский",be:"белорусский",bn:"бенгальский",my:"бирманский",bg:"болгарский",bs:"боснийский",cy:"валлийский",hu:"венгерский",vi:"вьетнамский",gl:"галисийский",el:"греческий",ka:"грузинский",gn:"гуарани",gu:"гуджарати",da:"датский",zu:"зулу",iw:"иврит",ig:"игбо",yi:"идиш",id:"индонезийский",ga:"ирландский",is:"исландский",es:"испанский",it:"итальянский",yo:"йоруба",kk:"казахский",kn:"каннада",ca:"каталанский",qu:"кечуа",ky:"киргизский","zh-CN":"китайский",ko:"корейский",co:"корсиканский",xh:"коса",ht:"креольский",ku:"курдский",km:"кхмерский",lo:"лаосский",la:"латинский",lv:"латышский",ln:"лингала",lt:"литовский",lg:"луганда",lb:"люксембургский",mk:"македонский",mg:"малагасийский",ms:"малайский",ml:"малаялам",dv:"мальдивский",mt:"мальтийский",mi:"маори",mr:"маратхи",mn:"монгольский",de:"немецкий",ne:"непальский",nl:"нидерландский",no:"норвежский",or:"ория",om:"оромо",pa:"панджаби",fa:"персидский",pl:"польский",pt:"португальский",ps:"пушту",rw:"руанда",ro:"румынский",sm:"самоанский",sa:"санскрит",sr:"сербский",st:"сесото",si:"сингальский",sd:"синдхи",sk:"словацкий",sl:"словенский",so:"сомалийский",sw:"суахили",su:"сунданский",tg:"таджикский",th:"тайский",ta:"тамильский",tt:"татарский",te:"телугу",ti:"тигринья",ts:"тсонга",tr:"турецкий",tk:"туркменский",uz:"узбекский",ug:"уйгурский",uk:"украинский",ur:"урду",tl:"филиппинский",fi:"финский",fr:"французский",fy:"фризский",ha:"хауса",hi:"хинди",hr:"хорватский",ak:"чви",ny:"чева",cs:"чешский",sv:"шведский",sn:"шона",gd:"шотландский",ee:"эве",eo:"эсперанто",et:"эстонский",jw:"яванский",ja:"японский"},y=(()=>{var s,a,n,i,l,m=r.join(t.tmpdir(),"wareset_tools_google.json"),u=[],f=async t=>{if(n&&n.res)try{var r=(await t.buffer()).toString().split("\n")[3],o=JSON.parse(JSON.parse(r)[0][2])[1],s=o[0][0][5],a=o[1],l=o[3];if(n.from!==l||n.to!==a)return;var u=s.map((e=>e[0])).join("");console.log("GT:",u,a,l),i&&(i[n.from]||(i[n.from]={}),i[n.from][n.to]||(i[n.from][n.to]={}),i[n.from][n.to][n.text]=u,e.writeFileSync(m,JSON.stringify(i,null,2))),n.res(u),n.res=null,await((e=100)=>new Promise((t=>setTimeout(t,e))))(333),n=null,p()}catch(f){}},c=()=>a&&(a.close(),a=s=null),p=async()=>{if(clearTimeout(l),!n)if(n=u.shift()){var t=n,r=t.from,w=t.to,g=t.text;i||(i=e.existsSync(m)?JSON.parse(e.readFileSync(m,"utf8")):{}),i[r]&&i[r][w]&&i[r][w][g]?(n.res(i[r][w][g]),n=null,p()):(s||(s=await(a=await o.launch({headless:!1})).newPage()).on("response",f),s.goto(`https://translate.google.com/?sl=${r}&tl=${w}&text=${encodeURI(g)}&op=translate`))}else l=setTimeout(c,5e3)};return(e="",t="en",r="ru")=>{if("zh"===t&&(t="zh-CN"),"zh"===r&&(r="zh-CN"),t===r||!(t in h)||!(r in h))throw new Error(`wareset_tools_google: ${t} -> ${r}: - incorrect lang`);return new Promise((o=>{u.push({res:o,text:e,from:t,to:r}),p()}))}})();export{w as DEEPL_LANGS,h as GOOGLE_LANGS,g as deepl,y as google};
