/* eslint-disable */
const e=require("fs"),t=require("os"),r=require("path"),o=require("puppeteer");function s(e){const t=Object.create(null);if(e)for(const r in e)if("default"!==r){const o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}return t.default=e,Object.freeze(t)}const n=s(e),a=s(t),i=s(r);var l,u,f,c,m,p,g,w,h,y,d={en:"английский",ar:"арабский",bg:"болгарский",hu:"венгерский",el:"греческий",da:"датский",id:"индонезийский",es:"испанский",it:"итальянский",zh:"китайский",ko:"корейский",lv:"латышский",lt:"литовский",de:"немецкий",nl:"нидерландский",nb:"норвежский",pl:"польский",pt:"португальский",ro:"румынский",ru:"русский",sk:"словацкий",sl:"словенский",tr:"турецкий",uk:"украинский",fi:"финский",fr:"французский",cs:"чешский",sv:"шведский",et:"эстонский",ja:"японский"},S=(p=i.join(a.tmpdir(),"wareset_tools_deepl.json"),g=[],w=async e=>{if(f)try{var t=JSON.parse((await e.buffer()).toString()).result;if(!t)return;var r=t.source_lang,o=t.target_lang,s=t.translations;if(!r||!o||!s)return;if(r=r.toLowerCase(),o=o.toLowerCase(),f.from!==r||f.to!==o)return;var a=s.map((e=>e.beams[0].sentences[0].text)).join("\n");c&&(c[f.from]||(c[f.from]={}),c[f.from][f.to]||(c[f.from][f.to]={}),c[f.from][f.to][f.text]=a,n.writeFileSync(p,JSON.stringify(c,null,2))),f.res(a),await((e=100)=>new Promise((t=>setTimeout(t,e))))(333),f=null,y()}catch(i){}},h=()=>u&&(u.close(),u=l=null),y=async()=>{if(clearTimeout(m),!f)if(f=g.shift()){var e=f,t=e.from,r=e.to,s=e.text;c||(c=n.existsSync(p)?JSON.parse(n.readFileSync(p,"utf8")):{}),c[t]&&c[t][r]&&c[t][r][s]?(f.res(c[t][r][s]),f=null,y()):(l||(l=await(u=await o.launch({headless:!1})).newPage()).on("response",w),l.goto(`https://www.deepl.com/ru/translator#${t}/${r}/${encodeURI(s)}`))}else m=setTimeout(h,5e3)},(e="",t="en",r="ru")=>{if(t===r||!(t in d)||!(r in d))throw new Error(`wareset_tools_deepl: ${t} -> ${r}: - incorrect lang`);return new Promise((o=>{g.push({res:o,text:e,from:t,to:r}),y()}))}),b={ru:"русский",en:"английский",az:"азербайджанский",ay:"аймара",sq:"албанский",am:"амхарский",ar:"арабский",hy:"армянский",as:"ассамский",af:"африкаанс",bm:"бамбара",eu:"баскский",be:"белорусский",bn:"бенгальский",my:"бирманский",bg:"болгарский",bs:"боснийский",cy:"валлийский",hu:"венгерский",vi:"вьетнамский",gl:"галисийский",el:"греческий",ka:"грузинский",gn:"гуарани",gu:"гуджарати",da:"датский",zu:"зулу",iw:"иврит",ig:"игбо",yi:"идиш",id:"индонезийский",ga:"ирландский",is:"исландский",es:"испанский",it:"итальянский",yo:"йоруба",kk:"казахский",kn:"каннада",ca:"каталанский",qu:"кечуа",ky:"киргизский","zh-CN":"китайский",ko:"корейский",co:"корсиканский",xh:"коса",ht:"креольский",ku:"курдский",km:"кхмерский",lo:"лаосский",la:"латинский",lv:"латышский",ln:"лингала",lt:"литовский",lg:"луганда",lb:"люксембургский",mk:"македонский",mg:"малагасийский",ms:"малайский",ml:"малаялам",dv:"мальдивский",mt:"мальтийский",mi:"маори",mr:"маратхи",mn:"монгольский",de:"немецкий",ne:"непальский",nl:"нидерландский",no:"норвежский",or:"ория",om:"оромо",pa:"панджаби",fa:"персидский",pl:"польский",pt:"португальский",ps:"пушту",rw:"руанда",ro:"румынский",sm:"самоанский",sa:"санскрит",sr:"сербский",st:"сесото",si:"сингальский",sd:"синдхи",sk:"словацкий",sl:"словенский",so:"сомалийский",sw:"суахили",su:"сунданский",tg:"таджикский",th:"тайский",ta:"тамильский",tt:"татарский",te:"телугу",ti:"тигринья",ts:"тсонга",tr:"турецкий",tk:"туркменский",uz:"узбекский",ug:"уйгурский",uk:"украинский",ur:"урду",tl:"филиппинский",fi:"финский",fr:"французский",fy:"фризский",ha:"хауса",hi:"хинди",hr:"хорватский",ak:"чви",ny:"чева",cs:"чешский",sv:"шведский",sn:"шона",gd:"шотландский",ee:"эве",eo:"эсперанто",et:"эстонский",jw:"яванский",ja:"японский"},k=(()=>{var e,t,r,s,l,u=i.join(a.tmpdir(),"wareset_tools_google.json"),f=[],c=async e=>{if(r&&r.res)try{var t=(await e.buffer()).toString().split("\n")[3],o=JSON.parse(JSON.parse(t)[0][2])[1],a=o[0][0][5],i=o[1],l=o[3];if(r.from!==l||r.to!==i)return;var f=a.map((e=>e[0])).join("");console.log("GT:",f,i,l),s&&(s[r.from]||(s[r.from]={}),s[r.from][r.to]||(s[r.from][r.to]={}),s[r.from][r.to][r.text]=f,n.writeFileSync(u,JSON.stringify(s,null,2))),r.res(f),r.res=null,await((e=100)=>new Promise((t=>setTimeout(t,e))))(333),r=null,p()}catch(c){}},m=()=>t&&(t.close(),t=e=null),p=async()=>{if(clearTimeout(l),!r)if(r=f.shift()){var a=r,i=a.from,g=a.to,w=a.text;s||(s=n.existsSync(u)?JSON.parse(n.readFileSync(u,"utf8")):{}),s[i]&&s[i][g]&&s[i][g][w]?(r.res(s[i][g][w]),r=null,p()):(e||(e=await(t=await o.launch({headless:!1})).newPage()).on("response",c),e.goto(`https://translate.google.com/?sl=${i}&tl=${g}&text=${encodeURI(w)}&op=translate`))}else l=setTimeout(m,5e3)};return(e="",t="en",r="ru")=>{if("zh"===t&&(t="zh-CN"),"zh"===r&&(r="zh-CN"),t===r||!(t in b)||!(r in b))throw new Error(`wareset_tools_google: ${t} -> ${r}: - incorrect lang`);return new Promise((o=>{f.push({res:o,text:e,from:t,to:r}),p()}))}})();exports.DEEPL_LANGS=d,exports.GOOGLE_LANGS=b,exports.deepl=S,exports.google=k;
