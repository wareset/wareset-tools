/* eslint-disable */
const e=require("rease");function i(e,i){return e==e?e===i:i!=i}function t(e,r,n){for(var s in r)null==(o=r[s])||(o=Object.getPrototypeOf(o))!==Object.prototype&&o?i(n[s],r[s])||i(e[s],n[s]=r[s])||(e[s]=r[s]):t(e[s],r[s],n[s]||(n[s]={}));var o}function r(e){e&&(t(this.rease.pixi,e,this.cache),this.rease.update())}function n(e){e&&(e.call(this,this.pixi),this.update())}function s(e,{props:i,$props$:s,$onDraw$:o,onResize:a,onCreate:h,onRender:c,onRenderCapture:d}){i&&t(e.pixi,i,{}),s&&e.watch(s,r,{rease:e,cache:{}}),h&&h.call(e,e.pixi),a&&e.on("pixi-resize",a,e),c&&e.on("pixi-render",c,e),d&&e.on("pixi-render",d,e,!0),o&&e.watch(o,n,e)}function o(i){var t=this.iam,r=this.props;if(t.pixi=i,t.pixi._rease=t,t.onDestroy((()=>(t.pixi=void 0,i.destroy()))),!t.destroyed){var n=i.canvas,o=n.style;o.width=o.height="100%";var a=!1,h=!0,c=e=>{a=!0,t._renderOptions&&(h&&(h=!1,i.resize(n.clientWidth,n.clientHeight),t.emitDeep("pixi-resize")),t.emitDeep("pixi-render",e),i.render(t._renderOptions))};t.update=()=>{a&&(a=!1,e.requestAnimationFrame(c))};var d,p=t.insert(e.createElement(e.RElement,{this:n}))[0],x=()=>{h=!0,t.update()};t.onDestroy(e.listen(n,"resize",(()=>{null!=d&&clearTimeout(d),d=setTimeout(x,17)}))),s(t,r),p.insert(r.children),a=!0,t.update()}}class PixiRenderer extends e.Rease{constructor(e){super(),this.await(e.autoDetectRenderer(e.options||{}),o,{iam:this,props:e})}update(){}}function a(){var e=this;e.pixi[/Bundle$/.test(e.method)?"unloadBundle":"unload"](e.url||e.urls||e.bundleId||e.bundleIds)}function h(e){var i=this.iam,t=this.props;if(t.unload&&i.onDestroy(a,t),!i.destroyed){var r=t.children;i.insert("function"==typeof r?r.call(i,e):r)}}class PixiAssets extends e.Rease{constructor(e){super(),this.await(e.pixi[e.method](e.options||e.url||e.urls||e.bundleId||e.bundleIds||e.assets,e.onProgress||e.assets),h,{iam:this,props:e})}}class PixiScene extends e.Rease{constructor(e){super(),this.pixi=new e.pixi(e.options),this.pixi._rease=this,this.onMove(this.hookMove,this),p(this),s(this,e),this.insert(e.children),this.onDestroy(this.hookDestroy)}update(){this.PixiRenderer&&this.PixiRenderer.update()}hookMove(e,i,t){if(e&&e!==this)for(var r=this;r=r.parent;){if(r instanceof PixiScene)return void(this.PixiRenderer=r.PixiRenderer);if(r===e)break}p(this)}hookDestroy(e){c(e),e.update(),e.pixi.removeFromParent(),e.pixi.destroy()}}function c(e){var i=e.PixiRenderer;i&&(i.PixiScene===e&&(i.PixiScene=i._renderOptions=void 0),e.PixiRenderer=void 0)}var d=[PixiRenderer,PixiScene];function p(e){c(e);var i=e.findParentOrNext(d,PixiScene),t=i.parent,r=i.next,n=e.pixi;if(n.removeFromParent(),t instanceof PixiRenderer)t.PixiScene=e,t._renderOptions={container:n},e.PixiRenderer=t;else{var s=r&&r.pixi,o=s&&s.parent||t&&t.pixi;o&&(s?o.addChildAt(n,o.getChildIndex(s)):o.addChild(n),e.PixiRenderer=(t||r).PixiRenderer)}e.update()}function x(e){var i=e.PixiScene;if(i){var t=i.pixi,r=t.filters;if(r){var n=e.pixi;r===n?t.filters=[]:Array.isArray(r)&&(t.filters=r.filter((function(e){return this!==e}),n)),e.update()}e.PixiScene=void 0}}function u(e){x(e);var i=e.findParentOrNext(PixiScene,PixiFilter),t=i.parent,r=i.next,n=e.pixi,s=r&&r.pixi,o=t&&t.pixi;if(o){var a,h=o.filters;h=Array.isArray(h)?h.slice():h?[h]:[],s&&(a=h.indexOf(s))>-1?h.splice(a,0,n):h.push(n),o.filters=h,e.PixiScene=t,e.update()}}class PixiFilter extends e.Rease{constructor(e){super(),this.pixi=new e.pixi(e.options),this.pixi._rease=this,this.onMove(this.hookMove,this),u(this),s(this,e),this.onDestroy(this.hookDestroy)}update(){this.PixiScene&&this.PixiScene.update()}hookMove(e,i,t){if(e&&e!==this)for(var r=this;r=r.parent;){if(r===this.PixiScene)return;if(r===e||r instanceof PixiScene)break}u(this)}hookDestroy(e){x(e),e.pixi.destroy()}}function l(e){var i=e.findParent(PixiScene);f(e),e.PixiScene=i,v.call(e,e._mode),P(e)}function f(e){var i=e._type,t=e._handler,r=e.PixiScene;if(r&&i&&t)for(var n=r.pixi,s=i.length;s-- >0;)n.off(i[s],t,e)}function P(e){var i=e._type,t=e._handler,r=e.PixiScene;if(r&&i&&t)for(var n=r.pixi,s=i.length;s-- >0;)n[e._once?"once":"on"](i[s],t,e._context)}function v(e){(this._mode=e)&&this.PixiScene&&(this.PixiScene.pixi.eventMode=e)}function y([e,i,t,r]){f(this),this._once=t,this._type=Array.isArray(e)?e.slice():[e],this._handler=i,this._context=void 0===r?this:r,P(this)}class PixiEvent extends e.Rease{constructor({$mode$:e,$once$:i,$type$:t,$handler$:r,$context$:n}){super(),this.onMove(this.hookMove,this),l(this),e&&this.watch(e,v,this),this.watchAll([t,r,i,n],y,this),this.onDestroy(this.hookDestroy)}hookMove(e,i,t){if(e&&e!==this)for(var r=this;r=r.parent;){if(r===this.PixiScene)return;if(r===e||r instanceof PixiScene)break}l(this)}hookDestroy(e){f(e)}}exports.Assets=PixiAssets,exports.Event=PixiEvent,exports.Filter=PixiFilter,exports.Renderer=PixiRenderer,exports.Scene=PixiScene;
