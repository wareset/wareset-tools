/* eslint-disable */
function t(t){var s=this.iam;s._gsx=this.gsx,s._gsy=this.gsy,s._render(t)}Object.defineProperty(exports,"__esModule",{value:!0});class s{constructor(){if(this._ctx=null,this._tl={},this._tn={},this._nu=!1,this._gsx=1,this._gsy=1,!("GLOBAL_SCALE_X"in this)){var t=s.prototype,a=CanvasRenderingContext2D.prototype,r=Object.defineProperty,e=Object.getOwnPropertyDescriptor;r(t,"GLOBAL_SCALE_X",{get:function(){return this._transform(),this._gsx}}),r(t,"GLOBAL_SCALE_Y",{get:function(){return this._transform(),this._gsy}}),r(t,"GLOBAL_SCALE_MEAN",{get:function(){return this._transform(),(this._gsx+this._gsy)/2}}),Object.getOwnPropertyNames(a).forEach((function(s){var i=e(a,s),n=i.get,h=i.set,_=i.value;(n||h||"function"==typeof _)&&r(t,s,n||h?{get:n?function(){return n.call(this._ctx)}:void 0,set:h?function(t){h.call(this._ctx,t)}:void 0}:{value:function(){return this._transform(),_.apply(this._ctx,arguments)}})}))}}_render(s){this._tl={tx:0,ty:0,sx:1,sy:1,ra:0,px:0,py:0},this._tn={tx:0,ty:0,sx:1,sy:1,ra:0,px:0,py:0},this._ctx.save(),s._draw(this),this._transform();var a=this._gsx,r=this._gsy;s._areas.forEach(t,{gsx:a,gsy:r,iam:this}),this._gsx=this._gsy=1,this._ctx.restore()}_transform(){if(this._nu){var t=this._ctx,s=this._tl,a=this._tn;for(var r in this._nu=!1,(s.px||s.py)&&t.translate(s.px,s.py),s.ra&&t.rotate(-s.ra),1===s.sx&&1===s.sy||t.scale(1/s.sx,1/s.sy),(s.tx||s.ty)&&t.translate(-s.tx,-s.ty),this._gsx/=s.sx,this._gsy/=s.sy,a)s[r]=a[r];this._gsx*=s.sx,this._gsy*=s.sy,(s.tx||s.ty)&&t.translate(s.tx,s.ty),1===s.sx&&1===s.sy||t.scale(s.sx,s.sy),s.ra&&t.rotate(s.ra),(s.px||s.py)&&t.translate(-s.px,-s.py)}}areaShift(t=0,s=0){var a=this._tn;a.tx===t&&a.ty===s||(a.tx=t,a.ty=s,this._nu=!0)}areaScale(t=1,s=t){var a=this._tn;a.sx===t&&a.sy===s||(a.sx=t,a.sy=s,this._nu=!0)}areaAngle(t=0){this.areaRadii(t*Math.PI/180)}areaRadii(t=0){var s=this._tn;s.ra!==t&&(s.ra=t,this._nu=!0)}areaPivot(t=0,s=0){var a=this._tn;a.px===t&&a.py===s||(a.px=t,a.py=s,this._nu=!0)}}var a=[];class Canvasarea{constructor(t){this._draw=t,this._areas=[]}render(t){var r=a.pop()||new s;r._ctx=t,r._render(this),a.push(r)}createArea(t,s){var a=new Canvasarea(t);return this.attachArea(a,s),a}attachArea(t,s){var a,r,e=this._areas;e.splice((a=s,r=e.length,"number"==typeof a&&a<=r?(a|=0)<0&&(a=r+a-1)<0?0:a:r),0,t)}detachArea(t){var s=this._areas,a="number"==typeof t?0|t:s.lastIndexOf(t);return!(a<0)&&s.splice(a,1).length>0}detachAllAreas(){this._areas.length=0}}function r(t){return new Canvasarea(t)}exports.Canvasarea=Canvasarea,exports.canvasarea=r,exports.default=r;
