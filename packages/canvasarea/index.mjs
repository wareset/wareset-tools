/* eslint-disable */
function t(t){var a=this.iam;a._gsx=this.gsx,a._gsy=this.gsy,a._render(t)}class a{constructor(){if(this._ctx=null,this._tl={},this._tn={},this._gsx=1,this._gsy=1,!("GLOBAL_SCALE_X"in this)){var t=a.prototype,s=CanvasRenderingContext2D.prototype,r=Object.defineProperty,e=Object.getOwnPropertyDescriptor;r(t,"GLOBAL_SCALE_X",{get:function(){return this._gsx}}),r(t,"GLOBAL_SCALE_Y",{get:function(){return this._gsy}}),r(t,"GLOBAL_SCALE_MEAN",{get:function(){return(this._gsx+this._gsy)/2}}),Object.getOwnPropertyNames(s).forEach((function(a){var i=e(s,a),h=i.get,n=i.set,_=i.value;(h||n||"function"==typeof _)&&r(t,a,h||n?{get:h?function(){return h.call(this._ctx)}:void 0,set:n?function(t){n.call(this._ctx,t)}:void 0}:{value:function(){return _.apply(this._ctx,arguments)}})}))}}_render(a){this._tl={tx:0,ty:0,sx:1,sy:1,ra:0,px:0,py:0},this._tn={tx:0,ty:0,sx:1,sy:1,ra:0,px:0,py:0},this._ctx.save(),a._draw(this);var s=this._gsx,r=this._gsy;a._areas.forEach(t,{gsx:s,gsy:r,iam:this}),this._gsx=this._gsy=1,this._ctx.restore()}_areaUpdate(){var t=this._ctx,a=this._tl,s=this._tn;for(var r in(a.px||a.py)&&t.translate(a.px,a.py),a.ra&&t.rotate(-a.ra),1===a.sx&&1===a.sy||t.scale(1/a.sx,1/a.sy),(a.tx||a.ty)&&t.translate(-a.tx,-a.ty),this._gsx/=a.sx,this._gsy/=a.sy,s)a[r]=s[r];this._gsx*=a.sx,this._gsy*=a.sy,(a.tx||a.ty)&&t.translate(a.tx,a.ty),1===a.sx&&1===a.sy||t.scale(a.sx,a.sy),a.ra&&t.rotate(a.ra),(a.px||a.py)&&t.translate(-a.px,-a.py)}areaShift(t=0,a=0){var s=this._tn;s.tx===t&&s.ty===a||(s.tx=t,s.ty=a,this._areaUpdate())}areaShiftX(t=0){var a=this._tn;this.areaShift(t,a.ty)}areaShiftY(t=0){var a=this._tn;this.areaShift(a.tx,t)}areaShiftAdd(t=0,a=0){var s=this._tn;this.areaShift(s.tx+t,s.ty+a)}areaShiftXAdd(t=0){var a=this._tn;this.areaShift(a.tx+t,a.ty)}areaShiftYAdd(t=0){var a=this._tn;this.areaShift(a.tx,a.ty+t)}areaScale(t=1,a=t){var s=this._tn;s.sx===t&&s.sy===a||(s.sx=t,s.sy=a,this._areaUpdate())}areaScaleX(t=1){var a=this._tn;this.areaScale(t,a.sy)}areaScaleY(t=1){var a=this._tn;this.areaScale(a.sx,t)}areaScaleAdd(t=0,a=t){var s=this._tn;this.areaScale(s.sx+t,s.sy+a)}areaScaleXAdd(t=0){var a=this._tn;this.areaScale(a.sx+t,a.sy)}areaScaleYAdd(t=0){var a=this._tn;this.areaScale(a.sx,a.sy+t)}areaRadii(t=0){var a=this._tn;a.ra!==t&&(a.ra=t,this._areaUpdate())}areaRadiiAdd(t=0){var a=this._tn;this.areaRadii(a.ra+t)}areaAngle(t=0){this.areaRadii(t*Math.PI/180)}areaAngleAdd(t=0){var a=this._tn;this.areaRadii(a.ra+t*Math.PI/180)}areaPivot(t=0,a=0){var s=this._tn;s.px===t&&s.py===a||(s.px=t,s.py=a,this._areaUpdate())}areaPivotX(t=0){var a=this._tn;this.areaPivot(t,a.py)}areaPivotY(t=0){var a=this._tn;this.areaPivot(a.px,t)}areaPivotAdd(t=0,a=0){var s=this._tn;this.areaPivot(s.px+t,s.py+a)}areaPivotXAdd(t=0){var a=this._tn;this.areaPivot(a.px+t,a.py)}areaPivotYAdd(t=0){var a=this._tn;this.areaPivot(a.px,a.py+t)}}var s=[];class Canvasarea{constructor(t){this._draw=t,this._areas=[]}render(t){var r=s.pop()||new a;r._ctx=t,r._render(this),s.push(r)}createArea(t,a){var s=new Canvasarea(t);return this.attachArea(s,a),s}attachArea(t,a){var s,r,e=this._areas;e.splice((s=a,r=e.length,"number"==typeof s&&s<=r?(s|=0)<0&&(s=r+s-1)<0?0:s:r),0,t)}detachArea(t){var a=this._areas,s="number"==typeof t?0|t:a.lastIndexOf(t);return!(s<0)&&a.splice(s,1).length>0}detachAllAreas(){this._areas.length=0}}function r(t){return new Canvasarea(t)}export{Canvasarea,r as canvasarea,r as default};
